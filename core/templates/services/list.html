{% extends "adminbase.html" %}
{% block content %}

<div class="app-content-header">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <h4 class="mb-0">Services</h4>

    <div class="d-flex gap-2">
      <form method="get" class="d-flex gap-2">
        <input type="text" name="q" value="{{ request.GET.q }}"
               class="form-control form-control-sm" placeholder="Search code/name/group">
        <button class="btn btn-sm btn-outline-secondary" type="submit">
          <i class="bi bi-search"></i>
        </button>
      </form>

      <a href="{% url 'core:service_add' %}" class="btn btn-sm btn-primary">
        <i class="bi bi-plus-lg"></i> Add Service
      </a>
    </div>
  </div>
</div>

<div class="app-content">
  <div class="container-fluid">

    <div class="card">
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-sm table-hover mb-0 align-middle cc-table cc-table-main">
            <thead class="table-light">
              <tr>
                <th style="width: 100px;">Code</th>
                <th>Name</th>
                <th style="width: 140px;">Service Types</th>
                <th style="width: 220px;">Revenue Account</th>
                <th style="width: 220px;">Receivable Account</th>
                <th style="width: 120px;">Active</th>
                <th style="width: 100px;" class="text-end">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for s in services %}
              <tr>
                <td>
                 
                    {{ s.code|default:"-" }}
                 
                </td>
                <td>{{ s.name }}</td>
                 <td>{{ s.service_group }}</td>
               
                <td>{{ s.revenue_account }}</td>
                <td>{{ s.receivable_account }}</td>
                <td>
                  {% if s.is_active %}
                    <span class="badge text-bg-success">Active</span>
                  {% else %}
                    <span class="badge text-bg-secondary">Inactive</span>
                  {% endif %}
                </td>
                <td class="text-end">
                  <a class="btn btn-xs btn-secondary"
                     href="{% url 'core:service_edit' s.pk %}">
                    <i class="bi bi-pencil"></i>
                  </a>
                  <a class="btn btn-xs btn-danger"
                     href="{% url 'core:service_delete' s.pk %}">
                    <i class="bi bi-trash"></i>
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="6" class="text-center text-muted py-4">
                  No services found.
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      {% if is_paginated %}
      <div class="card-footer d-flex justify-content-between align-items-center">
        <small class="text-muted">
          Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </small>
        <div class="btn-group">
          {% if page_obj.has_previous %}
            <a class="btn btn-sm btn-outline-secondary"
               href="?q={{ request.GET.q }}&page={{ page_obj.previous_page_number }}">Prev</a>
          {% else %}
            <button class="btn btn-xs btn-outline-secondary" disabled>Prev</button>
          {% endif %}
          {% if page_obj.has_next %}
            <a class="btn btn-sm btn-outline-secondary"
               href="?q={{ request.GET.q }}&page={{ page_obj.next_page_number }}">Next</a>
          {% else %}
            <button class="btn btn-xs btn-outline-secondary" disabled>Next</button>
          {% endif %}
        </div>
      </div>
      {% endif %}

    </div>

  </div>
</div>

{% endblock %}

{% block extra_css %}
<style>
  /* Compact table rows */

  /* Compact table rows */
.table.table-sm > :not(caption) > * > * {
  padding: 0.32rem 0.35rem; /* default bs: 0.5rem */
  vertical-align: middle;
  line-height: 1.2;
}


.btn-xs {
  padding: 0.23rem 0.23rem;
  font-size: 0.65rem;
  line-height: 1;
  border-radius: 4px;
}

.table i.bi {
  vertical-align: middle;
  line-height: 1;
  border-radius: 0;
  
 
}

td.action .btn-xs {
  padding: 0.21rem 0.21rem;
  font-size: 0.65rem;
  line-height: 1;
  border-radius: 4px;
}
</style>
{% endblock %}
