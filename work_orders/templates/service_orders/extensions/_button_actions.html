{# vendor_bookings/extensions/_button_actions.html #}

<div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">

  <!-- LEFT: Navigation -->
  <div class="d-flex flex-wrap gap-2 align-items-center">
    <a class="btn btn-outline-secondary btn-sm"
       href="{% url 'work_orders:service_order_list' %}">
      Back
    </a>

    <a class="btn btn-outline-primary btn-sm"
       href="{% url 'work_orders:service_order_print' vb.id %}"
       target="_blank">
      Print
      {% if vb.status == "DRAFT" %}
        <span class="ms-1 badge text-bg-warning">DRAFT</span>
      {% endif %}
    </a>
  </div>

  <!-- RIGHT: Workflow Actions -->
  <div class="d-flex flex-wrap gap-2 align-items-center justify-content-end">

    {% if vb.status == "DRAFT" %}
      <form method="post" action="{% url 'work_orders:service_order_submit' vb.id %}" class="d-inline">
        {% csrf_token %}
        <button class="btn btn-success btn-sm" type="submit">Submit</button>
      </form>
    {% endif %}

    {% if vb.status == "SUBMITTED" %}
      <form method="post" action="{% url 'work_orders:service_order_approve' vb.id %}" class="d-inline">
        {% csrf_token %}
        <button class="btn btn-success btn-sm" type="submit">Approve</button>
      </form>

      <form method="post" action="{% url 'work_orders:service_order_reject' vb.id %}" class="d-inline">
        {% csrf_token %}
        <button class="btn btn-outline-danger btn-sm" type="submit">Reject</button>
      </form>
    {% endif %}

    {% if vb.status == "APPROVED" %}
      <form method="post" action="{% url 'work_orders:service_order_confirm' vb.id %}" class="d-inline">
        {% csrf_token %}
        <button class="btn btn-primary btn-sm" type="submit">Confirm</button>
      </form>
    {% endif %}

    {% if vb.status == "CONFIRMED" %}
      <form method="post" action="{% url 'work_orders:service_order_send' vb.id %}" class="d-inline">
        {% csrf_token %}
        <button class="btn btn-primary btn-sm" type="submit">Send to Vendor</button>
      </form>
    {% endif %}

    {% if vb.status == "SENT" %}
      <form method="post" action="{% url 'work_orders:service_order_close' vb.id %}" class="d-inline">
        {% csrf_token %}
        <button class="btn btn-primary btn-sm" type="submit">Close</button>
      </form>
    {% endif %}

    {% if vb.status != "CANCELLED" and vb.status != "CLOSED" %}
      <form method="post" action="{% url 'work_orders:service_order_cancel' vb.id %}" class="d-inline"
            onsubmit="return confirm('Cancel Vendor Booking ini?');">
        {% csrf_token %}
        <button class="btn btn-outline-secondary btn-sm" type="submit">Cancel</button>
      </form>
    {% endif %}

  </div>
</div>
