{% load static %}
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sales Order {{ o.number }}</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; font-size:12px; color:#111; margin:0; }
    .page { width: 800px; margin: 24px auto; }
    .muted { color:#666; }
    .h1 { font-size:20px; font-weight:bold; margin:0; }
    .h3 { font-size:13px; font-weight:bold; margin:0 0 6px; }
    table { width:100%; border-collapse:collapse; }
    .box { border:1px solid #ddd; padding:8px; margin-bottom:8px; }
    .kv dt { float:left; width:120px; color:#666; }
    .kv dd { margin-left:130px; margin-bottom:4px; }
    table.lines th, table.lines td { border:1px solid #ddd; padding:6px; }
    table.lines th { background:#f5f5f5; text-align:left; }
    td.num { text-align:right; }
    table.totals { width:280px; margin-left:auto; border-collapse:collapse; margin-top:10px; }
    table.totals td { border:none; padding:4px 0; }
    .actions { margin: 8px 0 12px; }
    .btn { padding:6px 10px; font-size:12px; border:1px solid #ddd; background:#fff; text-decoration:none; color:#333; border-radius:4px; }
    @media print { .actions { display:none; } .page { width:auto; margin:0; } }
  </style>
</head>
<body>
  <div class="page">
    <table style="margin-bottom:10px;">
      <tr>
        <td style="width:120px"><img src="{% static 'adminlte/img/logo.png' %}" style="height:60px" alt="Logo"></td>
        <td style="text-align:right">
          <div class="h1">Sales Order</div>
          <div class="muted">Number: {{ o.number }}</div>
          <div style="margin-top:4px;">
            <b>Status:</b> {{ o.get_status_display|default:o.status }}<br>
            {% if o.date %}<b>Date:</b> {{ o.date }}<br>{% endif %}
          </div>
        </td>
      </tr>
    </table>

    <div class="actions">
      <a href="#" class="btn" onclick="window.print()">Print</a>
    </div>

    <table style="width:100%; margin-bottom:8px;">
      <tr>
        <td style="width:50%; padding-right:6px;">
          <div class="box">
            <div class="h3">Customer</div>
            <dl class="kv">
              <dt>Name</dt><dd>{{ o.customer }}</dd>
              {% if o.customer and o.customer.address %}<dt>Address</dt><dd>{{ o.customer.address }}</dd>{% endif %}
              {% if o.customer and o.customer.email %}<dt>Email</dt><dd>{{ o.customer.email }}</dd>{% endif %}
              {% if o.customer and o.customer.phone %}<dt>Phone</dt><dd>{{ o.customer.phone }}</dd>{% endif %}
            </dl>
          </div>
        </td>
        <td style="width:50%; padding-left:6px;">
          <div class="box">
            <div class="h3">Details</div>
            <dl class="kv">
              {% if o.currency %}<dt>Currency</dt><dd>{{ o.currency }}</dd>{% endif %}
              {% if o.payment_term %}<dt>Payment Term</dt><dd>{{ o.payment_term }}</dd>{% endif %}
              {% if o.sales_service %}<dt>Service</dt><dd>{{ o.sales_service }}</dd>{% endif %}
              {% if o.business_type %}<dt>Business Type</dt><dd>{{ o.business_type|upper }}</dd>{% endif %}
            </dl>
          </div>
        </td>
      </tr>
    </table>

    <table class="lines">
      <thead>
        <tr>
          <th style="width:28px">#</th>
          <th>Origin</th>
          <th>Destination</th>
          <th>Description</th>
          <th style="width:80px">UoM</th>
          <th style="width:70px" class="num">Qty</th>
          <th style="width:90px" class="num">Price</th>
          <th style="width:110px" class="num">Amount</th>
        </tr>
      </thead>
      <tbody>
        {% for ln in o.lines.all %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ ln.origin }}</td>
          <td>{{ ln.destination }}</td>
          <td>{{ ln.description }}</td>
          <td>{{ ln.uom }}</td>
          <td class="num">{{ ln.qty }}</td>
          <td class="num">{{ ln.price|floatformat:2 }}</td>
          <td class="num">{{ ln.amount|floatformat:2 }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="8" class="num">No lines.</td></tr>
        {% endfor %}
      </tbody>
    </table>

    <table class="totals">
      <tr><td>Subtotal</td><td class="num">{{ o.total|floatformat:2 }}</td></tr>
      <tr><td>VAT</td><td class="num">{{ o.vat|floatformat:2 }}</td></tr>
      <tr><td><b>Grand Total</b></td><td class="num"><b>{{ o.grand_total|floatformat:2 }}</b></td></tr>
    </table>
  </div>
</body>
</html>
