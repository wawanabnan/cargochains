<div class="d-flex justify-content-between align-items-center mb-2">
  <h6 class="mb-0">Routes</h6>
  <button id="btn-add-route"
          class="btn btn-primary btn-sm"
          data-url="{% url 'shipments:shipment_route_add_modal' shipment.id %}">
    + Add Route
  </button>
</div>

<table class="table table-sm align-middle">
  <thead>
    <tr>
      <th style="width:60px">#</th>
      <th>Route</th>
      <th style="width:160px">Schedule</th>
      <th style="width:240px">Type / Asset</th>
      <th style="width:120px">Status</th>
      <th style="width:150px"></th>
    </tr>
  </thead>
  <tbody>
  {% for r in shipment.routes.all %}
    <tr>
      <td>{{ r.order }}</td>
      <td>{{ r.origin_text }} → {{ r.destination_text }}</td>
      <td>
        {% if r.planned_departure %}{{ r.planned_departure|date:"Y-m-d H:i" }}{% else %}-{% endif %} →
        {% if r.planned_arrival %}{{ r.planned_arrival|date:"Y-m-d H:i" }}{% else %}-{% endif %}
      </td>
      <td>
        {{ r.transportation_type_name }}
        {% if r.transportation_asset_identifier and r.transportation_asset_identifier != "-" %}
          <div class="text-muted small">{{ r.transportation_asset_identifier }}</div>
        {% endif %}
        {% if r.driver_info %}
          <div class="text-muted small">{{ r.driver_info }}</div>
        {% endif %}
      </td>
      <td>{{ r.get_status_display }}</td>
      <td class="text-end">
        <button type="button"
                class="btn btn-outline-secondary btn-sm js-edit-route"
                data-url="{% url 'shipments:shipment_route_edit_modal' r.shipment_id r.id %}">
          Edit
        </button>
        <button type="button"
                class="btn btn-outline-danger btn-sm js-del-route"
                data-url="{% url 'shipments:shipment_route_delete_confirm' r.shipment_id r.id %}">
          Delete
        </button>
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="6" class="text-center text-muted">No routes yet</td></tr>
  {% endfor %}
  </tbody>
</table>
