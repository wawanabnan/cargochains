.flatpickr-day.today {
{% extends "adminbase.html" %}
{% load static %}

{% block content %}
<div class="app-content">
  <div class="container-fluid">

    <div class="card">
      <div class="card-header d-flex align-items-center justify-content-between">
        <div>
          <h3 class="card-title mb-0">
            {% if object %}Edit Vendor Booking{% else %}Add Vendor Booking{% endif %}
          </h3>
          {% if object %}
            <div class="text-muted small">
              {{ object.number }} Â·
              <span class="badge bg-info">{{ object.get_status_display|default:object.status }}</span>
            </div>
          {% endif %}
        </div>

        <a class="btn btn-outline-secondary btn-sm"
           href="{% if object %}{% url 'shipments:vendor_booking_detail' object.pk %}{% else %}{% url 'shipments:vendor_booking_list' %}{% endif %}">
          <i class="bi bi-arrow-left me-1"></i> Back
        </a>
      </div>

      <form method="post" novalidate>
        {% csrf_token %}

        <div class="card-body">
          {% if form.non_field_errors %}
            <div class="alert alert-danger py-2 small mb-2">
              {{ form.non_field_errors }}
            </div>
          {% endif %}

          <!-- ===================== HEADER ===================== -->
          {% include 'vendor_bookings/extensions/_vb_header.html' %}
          <!-- ===================== /SUMMARY ===================== -->
          {% include 'vendor_bookings/extensions/_vb_summary.html' %}          
          <!-- ===== LINES HEADER + ACTIONS ======================= -->
          {# include 'vendor_bookings/extensions/_vb_lines.html' #}         
          <!-- EMPTY FORM TEMPLATE (for Add Line JS) -->
        
        </div>

        <div class="card-footer d-flex gap-2 justify-content-end">
          <button class="btn btn-primary btn-sm">
            <i class="bi bi-save me-1"></i> Save
          </button>
        </div>
      </form>
    </div>

  </div>
</div>

{{ cost_types_json|json_script:"vbCostTypesJson" }}

{# ====================================#}
{#  VB Detail Modal (shell stays here) #}
{#  ================================== #}
<div class="modal fade" id="vbDetailModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content vb-modal-flat">

      {% include "vendor_bookings/extensions/_vb_modal_detail_header.html" %}

      <div class="modal-body">
        {% include "vendor_bookings/extensions/_vb_modal_general.html" %}
        
       
      </div>

      {% include "vendor_bookings/extensions/_vb_modal_detail_footer.html" %}

    </div>
  </div>
</div>


{% endblock %}


{% block extra_css %}
<style>
.vb-modal-flat {
  border-radius: 0px !important;
}
/* table row align top */
#lines-table td,
#lines-table th {
  vertical-align: top;
  padding: 2px 4px;        /* rapat seperti worksheet */
}

/* remove border & background from inputs */
#lines-table .form-control,
#lines-table .form-select,
#lines-table textarea {
  border: 0;
  border-radius: 0;
  box-shadow: none !important;
  background-color: transparent;
  padding: 2px 4px;
  font-size: 0.875rem;
}

/* keep focus visible (penting UX) */
#lines-table .form-control:focus,
#lines-table .form-select:focus,
#lines-table textarea:focus {
  outline: none;
  box-shadow: inset 0 -1px 0 #0d6efd; /* garis bawah ala Excel */
  background-color: rgba(13, 110, 253, 0.05);
}

/* textarea auto-grow look */
#lines-table textarea.auto-grow {
  resize: none;
  overflow: hidden;
  line-height: 1.25;
}

/* checkbox & buttons rapih */
#lines-table .btn {
  padding: 0 6px;
  line-height: 1.2;
}

/* hover row (worksheet feel) */
#lines-table tbody tr:hover {
  background-color: #f8f9fa;
}

/* ===============================
   Flatpickr date input (Modal only)
   =============================== */

/* ukuran & border dasar */
#vbDetailModal input.vb-date.form-control {
  height: 30px;                     /* lebih ramping */
  padding: 0.25rem 0.5rem;
  font-size: 0.8125rem;             /* ~13px */
  border-radius: 4px;
  border: 1px solid rgba(13, 110, 253, 0.25); /* biru tipis */
  background-color: #fdfefe;
}

/* hover: ada hint interaktif */
#vbDetailModal input.vb-date.form-control:hover {
  border-color: rgba(13, 110, 253, 0.45);
}

/* focus: jelas tapi halus */
#vbDetailModal input.vb-date.form-control:focus {
  border-color: #0d6efd; /* bootstrap primary */
  box-shadow: 0 0 0 0.1rem rgba(13, 110, 253, 0.15);
  background-color: #fff;
}

/* placeholder lebih soft */
#vbDetailModal input.vb-date::placeholder {
  color: #9aa4af;
  font-size: 0.75rem;
}

/* ===============================
   Flatpickr calendar popup
   =============================== */

/* ukuran font calendar */
.flatpickr-calendar {
  font-size: 0.7rem;
}

/* header bulan */
.flatpickr-months .flatpickr-month {
  color: #0d6efd;
  font-weight: 600;
}

/* hari terpilih */
.flatpickr-day.selected,
.flatpickr-day.startRange,
.flatpickr-day.endRange {
  background: #0d6efd;
  border-color: #0d6efd;
  color: #fff;
}

/* hari hari biasa */
.flatpickr-day:hover {
  background: rgba(13, 110, 253, 0.1);
  border-color: transparent;
}

/* hari ini */
.flatpickr-day.today {
  border-color: rgba(13, 110, 253, 0.6);
}

/* disable box-shadow bawaan */
.flatpickr-calendar,
.flatpickr-calendar.open {
  box-shadow: 0 6px 16px rgba(0,0,0,.12);
  border-radius: 6px;
}


#vbDetailModal input.vb-date.form-control {
  line-height: 1.2 !important;
}

#vbDetailModal input.vb-date.form-control-sm {
  min-height: 30px !important;
}

#vbDetailModal input.vb-date.form-control {
  height: 30px !important;
  padding: 0.25rem 0.5rem !important;
  font-size: 0.8125rem !important;
  border-radius: 4px !important;
  border: 1px solid rgba(13, 110, 253, 0.25) !important;
  background-color: #fdfefe !important;
}

/* Popup flatpickr: kecil & ada warna lembut */
.flatpickr-calendar {
  font-size: 0.8rem !important;
  border-radius: 8px !important;
  border: 1px solid rgba(13,110,253,.18) !important;
  box-shadow: 0 10px 24px rgba(0,0,0,.14) !important;
}

.flatpickr-months .flatpickr-month {
  color: #0d6efd !important;
  font-weight: 600 !important;
}

.flatpickr-weekdays {
  background: rgba(13,110,253,.06) !important;
}

.flatpickr-weekday {
  color: rgba(13,110,253,.85) !important;
  font-weight: 600 !important;
}

.flatpickr-day.selected,
.flatpickr-day.startRange,
.flatpickr-day.endRange {
  background: #0d6efd !important;
  border-color: #0d6efd !important;
  color: #fff !important;
}

.flatpickr-day:hover {
  background: rgba(13,110,253,.10) !important;
  border-color: transparent !important;
}

.flatpickr-day.today {
  border-color: rgba(13,110,253,.55) !important;
}

/*!
 * README
 * This demo uses a subset of Bootstrap.
 * Just 2000+ lines of code to style some buttons and input fields
 * Sigh...
 */

/* Override docs button styles */
.dcs button {
  display: unset;
  min-width: unset;
  height: unset;
  line-height: unset;
  border-radius: unset;
  cursor: unset;
  font-size: unset;
  padding: unset;
  text-align: unset;
}

.tox-tinymce {
  border-radius: 0px !important;
}
/*# sourceMappingURL=bootstrap.css.map */

/* bikin job_order select ga ngambil 1 layar */
.vb-jobpick select,
.vb-jobpick .form-select {
  max-width: 520px;      /* adjust */
  width: 100%;
}

/* kalau sudah object (link job) biar tidak melebar */
.vb-joblink {
  max-width: 720px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

</style>
<link rel="stylesheet" href="{% static 'vendor/css/select2.min.css' %}">
<link rel="stylesheet" href="{% static 'vendor/css/flatpickr.min.css' %}">
<link rel="stylesheet" href="{% static 'vendor/css/tinymce.css' %}">

{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="{% static 'vendor/js/select2.full.min.js' %}"></script>
<script src="{% static 'vendor/js/flatpickr.min.js' %}"></script>

<script src="{% static 'js/idr_rate.js' %}"></script>

<script src="{% static 'js/vendor_bookings/vb_tax_select2.js' %}"></script>
<script src="{% static 'js/vendor_bookings/vb_lines_autogrow.js' %}"></script>
<script src="{% static 'js/vendor_bookings/vb_lines_tax.js' %}"></script>
<script src="{% static 'js/vendor_bookings/vb_lines_delete.js' %}"></script>
<script src="{% static 'js/vendor_bookings/vb_lines_recalc.js' %}"></script>
<script src="{% static 'js/vendor_bookings/vb_lines_controller.js' %}"></script>

<script src="{% static 'js/vendor_bookings/vb_modal_datepicker.js' %}"></script>
<script src="{% static 'js/vendor_bookings/vb_schema.js' %}"></script>


<script src="{% static 'js/vendor_bookings/vb_header_toggle.js' %}"></script>

<script>
  window.VB = window.VB || {};
  VB.costTypeMap = {{ cost_type_map_json|safe }};
  VB.costTypes = {{ cost_types_json|safe }};

</script>

<script src="{% static 'js/vendor_bookings/vb_queries.js' %}?v=20260116"></script>

<script src="{% static 'js/vendor_bookings/vb_modal_controller.js' %}"></script>



{% endblock %}



